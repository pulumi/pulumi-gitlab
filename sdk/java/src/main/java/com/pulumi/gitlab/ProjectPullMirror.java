// *** WARNING: this file was generated by pulumi-language-java. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package com.pulumi.gitlab;

import com.pulumi.core.Output;
import com.pulumi.core.annotations.Export;
import com.pulumi.core.annotations.ResourceType;
import com.pulumi.core.internal.Codegen;
import com.pulumi.gitlab.ProjectPullMirrorArgs;
import com.pulumi.gitlab.Utilities;
import com.pulumi.gitlab.inputs.ProjectPullMirrorState;
import java.lang.Boolean;
import java.lang.Integer;
import java.lang.String;
import java.util.List;
import java.util.Optional;
import javax.annotation.Nullable;

/**
 * The `gitlab.ProjectPullMirror` resource allows managing pull mirroring for GitLab projects.
 * 
 * This resource uses the dedicated pull mirror API endpoint which provides reliable configuration of pull mirroring after project creation.
 * 
 * **Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/project_pull_mirroring/#configure-pull-mirroring-for-a-project)
 * 
 * ## Example Usage
 * 
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.gitlab.ProjectPullMirror;
 * import com.pulumi.gitlab.ProjectPullMirrorArgs;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         // Basic pull mirror from GitHub
 *         // Note: Unspecified options will use GitLab's defaults
 *         var github = new ProjectPullMirror("github", ProjectPullMirrorArgs.builder()
 *             .project(example.id())
 *             .url("https://github.com/example/repo.git")
 *             .authUser("github-username")
 *             .authPassword(githubToken)
 *             .build());
 * 
 *         // Pull mirror with explicit options
 *         // Only specify options you want to control; omit others to use GitLab defaults
 *         var advanced = new ProjectPullMirror("advanced", ProjectPullMirrorArgs.builder()
 *             .project(example.id())
 *             .url("https://github.com/example/repo.git")
 *             .enabled(true)
 *             .authUser("github-username")
 *             .authPassword(githubToken)
 *             .mirrorTriggerBuilds(true)
 *             .onlyMirrorProtectedBranches(true)
 *             .mirrorOverwritesDivergedBranches(false)
 *             .build());
 * 
 *         // Pull mirror with branch regex (Premium/Ultimate)
 *         var regex = new ProjectPullMirror("regex", ProjectPullMirrorArgs.builder()
 *             .project(example.id())
 *             .url("https://github.com/example/repo.git")
 *             .authUser("github-username")
 *             .authPassword(githubToken)
 *             .mirrorBranchRegex("^(main|develop|release/.*)$")
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * 
 * ## Import
 * 
 * Starting in Terraform v1.5.0, you can use an import block to import `gitlab_project_pull_mirror`. For example:
 * 
 * terraform
 * 
 * import {
 * 
 *   to = gitlab_project_pull_mirror.example
 * 
 *   id = &#34;see CLI command below for ID&#34;
 * 
 * }
 * 
 * Importing using the CLI is supported with the following syntax:
 * 
 * Import using project ID
 * 
 * ```sh
 * $ pulumi import gitlab:index/projectPullMirror:ProjectPullMirror example 123
 * ```
 * 
 * Import using project path
 * 
 * Note: Import is not supported for disabled mirrors because the GitLab API returns
 * 
 * http 400 for disabled mirrors.
 * 
 * ```sh
 * $ pulumi import gitlab:index/projectPullMirror:ProjectPullMirror example &#34;group/project&#34;
 * ```
 * 
 */
@ResourceType(type="gitlab:index/projectPullMirror:ProjectPullMirror")
public class ProjectPullMirror extends com.pulumi.resources.CustomResource {
    /**
     * Authentication password or token for the remote repository.
     * 
     */
    @Export(name="authPassword", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> authPassword;

    /**
     * @return Authentication password or token for the remote repository.
     * 
     */
    public Output<Optional<String>> authPassword() {
        return Codegen.optional(this.authPassword);
    }
    /**
     * Authentication username for the remote repository.
     * 
     */
    @Export(name="authUser", refs={String.class}, tree="[0]")
    private Output</* @Nullable */ String> authUser;

    /**
     * @return Authentication username for the remote repository.
     * 
     */
    public Output<Optional<String>> authUser() {
        return Codegen.optional(this.authUser);
    }
    /**
     * Enable or disable the pull mirror. Defaults to `true`.
     * 
     */
    @Export(name="enabled", refs={Boolean.class}, tree="[0]")
    private Output<Boolean> enabled;

    /**
     * @return Enable or disable the pull mirror. Defaults to `true`.
     * 
     */
    public Output<Boolean> enabled() {
        return this.enabled;
    }
    /**
     * Last error message from the mirror operation.
     * 
     */
    @Export(name="lastError", refs={String.class}, tree="[0]")
    private Output<String> lastError;

    /**
     * @return Last error message from the mirror operation.
     * 
     */
    public Output<String> lastError() {
        return this.lastError;
    }
    /**
     * Timestamp of the last successful mirror update.
     * 
     */
    @Export(name="lastSuccessfulUpdateAt", refs={String.class}, tree="[0]")
    private Output<String> lastSuccessfulUpdateAt;

    /**
     * @return Timestamp of the last successful mirror update.
     * 
     */
    public Output<String> lastSuccessfulUpdateAt() {
        return this.lastSuccessfulUpdateAt;
    }
    /**
     * Timestamp of the last mirror update attempt.
     * 
     */
    @Export(name="lastUpdateAt", refs={String.class}, tree="[0]")
    private Output<String> lastUpdateAt;

    /**
     * @return Timestamp of the last mirror update attempt.
     * 
     */
    public Output<String> lastUpdateAt() {
        return this.lastUpdateAt;
    }
    /**
     * Timestamp when the last mirror update started.
     * 
     */
    @Export(name="lastUpdateStartedAt", refs={String.class}, tree="[0]")
    private Output<String> lastUpdateStartedAt;

    /**
     * @return Timestamp when the last mirror update started.
     * 
     */
    public Output<String> lastUpdateStartedAt() {
        return this.lastUpdateStartedAt;
    }
    /**
     * Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `onlyMirrorProtectedBranches`.
     * 
     */
    @Export(name="mirrorBranchRegex", refs={String.class}, tree="[0]")
    private Output<String> mirrorBranchRegex;

    /**
     * @return Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `onlyMirrorProtectedBranches`.
     * 
     */
    public Output<String> mirrorBranchRegex() {
        return this.mirrorBranchRegex;
    }
    /**
     * The ID of the pull mirror. This ID is set by GitLab.
     * 
     */
    @Export(name="mirrorId", refs={Integer.class}, tree="[0]")
    private Output<Integer> mirrorId;

    /**
     * @return The ID of the pull mirror. This ID is set by GitLab.
     * 
     */
    public Output<Integer> mirrorId() {
        return this.mirrorId;
    }
    /**
     * Overwrite diverged branches on the target project.
     * 
     */
    @Export(name="mirrorOverwritesDivergedBranches", refs={Boolean.class}, tree="[0]")
    private Output<Boolean> mirrorOverwritesDivergedBranches;

    /**
     * @return Overwrite diverged branches on the target project.
     * 
     */
    public Output<Boolean> mirrorOverwritesDivergedBranches() {
        return this.mirrorOverwritesDivergedBranches;
    }
    /**
     * Trigger CI/CD pipelines when the mirror updates.
     * 
     */
    @Export(name="mirrorTriggerBuilds", refs={Boolean.class}, tree="[0]")
    private Output<Boolean> mirrorTriggerBuilds;

    /**
     * @return Trigger CI/CD pipelines when the mirror updates.
     * 
     */
    public Output<Boolean> mirrorTriggerBuilds() {
        return this.mirrorTriggerBuilds;
    }
    /**
     * Mirror only protected branches. Cannot be used with `mirrorBranchRegex`.
     * 
     */
    @Export(name="onlyMirrorProtectedBranches", refs={Boolean.class}, tree="[0]")
    private Output<Boolean> onlyMirrorProtectedBranches;

    /**
     * @return Mirror only protected branches. Cannot be used with `mirrorBranchRegex`.
     * 
     */
    public Output<Boolean> onlyMirrorProtectedBranches() {
        return this.onlyMirrorProtectedBranches;
    }
    /**
     * The ID or URL-encoded path of the project owned by the authenticated user.
     * 
     */
    @Export(name="project", refs={String.class}, tree="[0]")
    private Output<String> project;

    /**
     * @return The ID or URL-encoded path of the project owned by the authenticated user.
     * 
     */
    public Output<String> project() {
        return this.project;
    }
    /**
     * Current status of the mirror update.
     * 
     */
    @Export(name="updateStatus", refs={String.class}, tree="[0]")
    private Output<String> updateStatus;

    /**
     * @return Current status of the mirror update.
     * 
     */
    public Output<String> updateStatus() {
        return this.updateStatus;
    }
    /**
     * The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `authUser` and `authPassword` instead.
     * 
     */
    @Export(name="url", refs={String.class}, tree="[0]")
    private Output<String> url;

    /**
     * @return The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `authUser` and `authPassword` instead.
     * 
     */
    public Output<String> url() {
        return this.url;
    }

    /**
     *
     * @param name The _unique_ name of the resulting resource.
     */
    public ProjectPullMirror(java.lang.String name) {
        this(name, ProjectPullMirrorArgs.Empty);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     */
    public ProjectPullMirror(java.lang.String name, ProjectPullMirrorArgs args) {
        this(name, args, null);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param options A bag of options that control this resource's behavior.
     */
    public ProjectPullMirror(java.lang.String name, ProjectPullMirrorArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("gitlab:index/projectPullMirror:ProjectPullMirror", name, makeArgs(args, options), makeResourceOptions(options, Codegen.empty()), false);
    }

    private ProjectPullMirror(java.lang.String name, Output<java.lang.String> id, @Nullable ProjectPullMirrorState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("gitlab:index/projectPullMirror:ProjectPullMirror", name, state, makeResourceOptions(options, id), false);
    }

    private static ProjectPullMirrorArgs makeArgs(ProjectPullMirrorArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        if (options != null && options.getUrn().isPresent()) {
            return null;
        }
        return args == null ? ProjectPullMirrorArgs.Empty : args;
    }

    private static com.pulumi.resources.CustomResourceOptions makeResourceOptions(@Nullable com.pulumi.resources.CustomResourceOptions options, @Nullable Output<java.lang.String> id) {
        var defaultOptions = com.pulumi.resources.CustomResourceOptions.builder()
            .version(Utilities.getVersion())
            .additionalSecretOutputs(List.of(
                "authPassword",
                "url"
            ))
            .build();
        return com.pulumi.resources.CustomResourceOptions.merge(defaultOptions, options, id);
    }

    /**
     * Get an existing Host resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state
     * @param options Optional settings to control the behavior of the CustomResource.
     */
    public static ProjectPullMirror get(java.lang.String name, Output<java.lang.String> id, @Nullable ProjectPullMirrorState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        return new ProjectPullMirror(name, id, state, options);
    }
}
