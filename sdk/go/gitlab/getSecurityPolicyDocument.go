// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package gitlab

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi-gitlab/sdk/v9/go/gitlab/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Generates a GitLab security policy YAML document from structured configuration.
// This data source performs pure transformation without any API calls.
//
// **Upstream API**: [GitLab Security Policies Documentation](https://docs.gitlab.com/ee/user/application_security/policies/scan_execution_policies/)
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-gitlab/sdk/v9/go/gitlab"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			// Use this with `gitlab_repository_file` to manage your policies using native HCL
//			scan, err := gitlab.GetSecurityPolicyDocument(ctx, &gitlab.GetSecurityPolicyDocumentArgs{
//				ScanExecutionPolicies: []gitlab.GetSecurityPolicyDocumentScanExecutionPolicy{
//					{
//						Name:    "Basic SAST Policy",
//						Enabled: true,
//						Rules: []gitlab.GetSecurityPolicyDocumentScanExecutionPolicyRule{
//							{
//								Type:       "pipeline",
//								BranchType: pulumi.StringRef("all"),
//							},
//						},
//						Actions: []gitlab.GetSecurityPolicyDocumentScanExecutionPolicyAction{
//							{
//								Scan: "sast",
//							},
//						},
//					},
//				},
//			}, nil)
//			if err != nil {
//				return err
//			}
//			// See `gitlab_project_security_policy_attachment` or `gitlab_group_security_policy_attachment`
//			// for how to link a security policy project to a project or group.
//			_, err = gitlab.NewRepositoryFile(ctx, "policy", &gitlab.RepositoryFileArgs{
//				Project:  pulumi.String("1234"),
//				Ref:      "main",
//				FilePath: pulumi.String(".gitlab/security-policies/policy.yml"),
//				Content:  pulumi.String(scan.Yaml),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
func GetSecurityPolicyDocument(ctx *pulumi.Context, args *GetSecurityPolicyDocumentArgs, opts ...pulumi.InvokeOption) (*GetSecurityPolicyDocumentResult, error) {
	opts = internal.PkgInvokeDefaultOpts(opts)
	var rv GetSecurityPolicyDocumentResult
	err := ctx.Invoke("gitlab:index/getSecurityPolicyDocument:getSecurityPolicyDocument", args, &rv, opts...)
	if err != nil {
		return nil, err
	}
	return &rv, nil
}

// A collection of arguments for invoking getSecurityPolicyDocument.
type GetSecurityPolicyDocumentArgs struct {
	// Scan execution policy configuration. Multiple policies can be specified.
	ScanExecutionPolicies []GetSecurityPolicyDocumentScanExecutionPolicy `pulumi:"scanExecutionPolicies"`
}

// A collection of values returned by getSecurityPolicyDocument.
type GetSecurityPolicyDocumentResult struct {
	// Unique identifier for this policy document (hash of generated YAML).
	Id string `pulumi:"id"`
	// Scan execution policy configuration. Multiple policies can be specified.
	ScanExecutionPolicies []GetSecurityPolicyDocumentScanExecutionPolicy `pulumi:"scanExecutionPolicies"`
	// The generated policy document in YAML format, ready to write to `.gitlab/security-policies/policy.yml`.
	Yaml string `pulumi:"yaml"`
}

func GetSecurityPolicyDocumentOutput(ctx *pulumi.Context, args GetSecurityPolicyDocumentOutputArgs, opts ...pulumi.InvokeOption) GetSecurityPolicyDocumentResultOutput {
	return pulumi.ToOutputWithContext(ctx.Context(), args).
		ApplyT(func(v interface{}) (GetSecurityPolicyDocumentResultOutput, error) {
			args := v.(GetSecurityPolicyDocumentArgs)
			options := pulumi.InvokeOutputOptions{InvokeOptions: internal.PkgInvokeDefaultOpts(opts)}
			return ctx.InvokeOutput("gitlab:index/getSecurityPolicyDocument:getSecurityPolicyDocument", args, GetSecurityPolicyDocumentResultOutput{}, options).(GetSecurityPolicyDocumentResultOutput), nil
		}).(GetSecurityPolicyDocumentResultOutput)
}

// A collection of arguments for invoking getSecurityPolicyDocument.
type GetSecurityPolicyDocumentOutputArgs struct {
	// Scan execution policy configuration. Multiple policies can be specified.
	ScanExecutionPolicies GetSecurityPolicyDocumentScanExecutionPolicyArrayInput `pulumi:"scanExecutionPolicies"`
}

func (GetSecurityPolicyDocumentOutputArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*GetSecurityPolicyDocumentArgs)(nil)).Elem()
}

// A collection of values returned by getSecurityPolicyDocument.
type GetSecurityPolicyDocumentResultOutput struct{ *pulumi.OutputState }

func (GetSecurityPolicyDocumentResultOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*GetSecurityPolicyDocumentResult)(nil)).Elem()
}

func (o GetSecurityPolicyDocumentResultOutput) ToGetSecurityPolicyDocumentResultOutput() GetSecurityPolicyDocumentResultOutput {
	return o
}

func (o GetSecurityPolicyDocumentResultOutput) ToGetSecurityPolicyDocumentResultOutputWithContext(ctx context.Context) GetSecurityPolicyDocumentResultOutput {
	return o
}

// Unique identifier for this policy document (hash of generated YAML).
func (o GetSecurityPolicyDocumentResultOutput) Id() pulumi.StringOutput {
	return o.ApplyT(func(v GetSecurityPolicyDocumentResult) string { return v.Id }).(pulumi.StringOutput)
}

// Scan execution policy configuration. Multiple policies can be specified.
func (o GetSecurityPolicyDocumentResultOutput) ScanExecutionPolicies() GetSecurityPolicyDocumentScanExecutionPolicyArrayOutput {
	return o.ApplyT(func(v GetSecurityPolicyDocumentResult) []GetSecurityPolicyDocumentScanExecutionPolicy {
		return v.ScanExecutionPolicies
	}).(GetSecurityPolicyDocumentScanExecutionPolicyArrayOutput)
}

// The generated policy document in YAML format, ready to write to `.gitlab/security-policies/policy.yml`.
func (o GetSecurityPolicyDocumentResultOutput) Yaml() pulumi.StringOutput {
	return o.ApplyT(func(v GetSecurityPolicyDocumentResult) string { return v.Yaml }).(pulumi.StringOutput)
}

func init() {
	pulumi.RegisterOutputType(GetSecurityPolicyDocumentResultOutput{})
}
