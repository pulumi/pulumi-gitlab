// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package gitlab

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi-gitlab/sdk/v9/go/gitlab/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// The `getArtifactFile` data source allows downloading a single artifact file from a specific job in the latest successful pipeline for a given reference (branch, tag, or commit).
// **Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/job_artifacts/#download-a-single-artifact-file-by-reference-name)
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-gitlab/sdk/v9/go/gitlab"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			// Download a text artifact file from the latest successful pipeline
//			config, err := gitlab.GetArtifactFile(ctx, &gitlab.GetArtifactFileArgs{
//				Project:      "namespace/myproject",
//				Job:          "build-job",
//				Ref:          "main",
//				ArtifactPath: "config/settings.json",
//			}, nil)
//			if err != nil {
//				return err
//			}
//			ctx.Export("configContent", config.Content)
//			// Download a binary artifact file using base64 encoding
//			binary, err := gitlab.GetArtifactFile(ctx, &gitlab.GetArtifactFileArgs{
//				Project:      "namespace/myproject",
//				Job:          "build-job",
//				Ref:          "v1.0.0",
//				ArtifactPath: "dist/app.zip",
//			}, nil)
//			if err != nil {
//				return err
//			}
//			ctx.Export("binaryContentBase64", binary.ContentBase64)
//			// Download artifact from a specific tag
//			_, err = gitlab.GetArtifactFile(ctx, &gitlab.GetArtifactFileArgs{
//				Project:      "12345",
//				Job:          "release-job",
//				Ref:          "v2.1.0",
//				ArtifactPath: "release-notes.txt",
//			}, nil)
//			if err != nil {
//				return err
//			}
//			// Download a larger artifact with custom size limit
//			_, err = gitlab.GetArtifactFile(ctx, &gitlab.GetArtifactFileArgs{
//				Project:      "namespace/myproject",
//				Job:          "build-job",
//				Ref:          "main",
//				ArtifactPath: "dist/large-file.zip",
//				MaxSizeBytes: pulumi.IntRef(20971520),
//			}, nil)
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
func GetArtifactFile(ctx *pulumi.Context, args *GetArtifactFileArgs, opts ...pulumi.InvokeOption) (*GetArtifactFileResult, error) {
	opts = internal.PkgInvokeDefaultOpts(opts)
	var rv GetArtifactFileResult
	err := ctx.Invoke("gitlab:index/getArtifactFile:getArtifactFile", args, &rv, opts...)
	if err != nil {
		return nil, err
	}
	return &rv, nil
}

// A collection of arguments for invoking getArtifactFile.
type GetArtifactFileArgs struct {
	// Path to the artifact file within the job's artifacts archive. This path is relative to the archive contents (not the local filesystem). Ensure each `getArtifactFile` data source in your configuration uses a unique artifactPath to avoid ambiguity.
	ArtifactPath string `pulumi:"artifactPath"`
	// The name of the job.
	Job string `pulumi:"job"`
	// Maximum bytes to read from the artifact. Defaults to 10MB (10485760 bytes).
	MaxSizeBytes *int `pulumi:"maxSizeBytes"`
	// The ID or URL-encoded path of the project.
	Project string `pulumi:"project"`
	// The name of the branch, tag, or commit SHA.
	Ref string `pulumi:"ref"`
}

// A collection of values returned by getArtifactFile.
type GetArtifactFileResult struct {
	// Path to the artifact file within the job's artifacts archive. This path is relative to the archive contents (not the local filesystem). Ensure each `getArtifactFile` data source in your configuration uses a unique artifactPath to avoid ambiguity.
	ArtifactPath string `pulumi:"artifactPath"`
	// The content of the artifact file as a UTF-8 string. Use `contentBase64` for binary files.
	Content string `pulumi:"content"`
	// The content of the artifact file as a base64-encoded string. Useful for binary files.
	ContentBase64 string `pulumi:"contentBase64"`
	// The ID of this datasource. In the format `<project>:<ref>:<job>:<artifact_path>`.
	Id string `pulumi:"id"`
	// The name of the job.
	Job string `pulumi:"job"`
	// Maximum bytes to read from the artifact. Defaults to 10MB (10485760 bytes).
	MaxSizeBytes *int `pulumi:"maxSizeBytes"`
	// The ID or URL-encoded path of the project.
	Project string `pulumi:"project"`
	// The name of the branch, tag, or commit SHA.
	Ref string `pulumi:"ref"`
}

func GetArtifactFileOutput(ctx *pulumi.Context, args GetArtifactFileOutputArgs, opts ...pulumi.InvokeOption) GetArtifactFileResultOutput {
	return pulumi.ToOutputWithContext(ctx.Context(), args).
		ApplyT(func(v interface{}) (GetArtifactFileResultOutput, error) {
			args := v.(GetArtifactFileArgs)
			options := pulumi.InvokeOutputOptions{InvokeOptions: internal.PkgInvokeDefaultOpts(opts)}
			return ctx.InvokeOutput("gitlab:index/getArtifactFile:getArtifactFile", args, GetArtifactFileResultOutput{}, options).(GetArtifactFileResultOutput), nil
		}).(GetArtifactFileResultOutput)
}

// A collection of arguments for invoking getArtifactFile.
type GetArtifactFileOutputArgs struct {
	// Path to the artifact file within the job's artifacts archive. This path is relative to the archive contents (not the local filesystem). Ensure each `getArtifactFile` data source in your configuration uses a unique artifactPath to avoid ambiguity.
	ArtifactPath pulumi.StringInput `pulumi:"artifactPath"`
	// The name of the job.
	Job pulumi.StringInput `pulumi:"job"`
	// Maximum bytes to read from the artifact. Defaults to 10MB (10485760 bytes).
	MaxSizeBytes pulumi.IntPtrInput `pulumi:"maxSizeBytes"`
	// The ID or URL-encoded path of the project.
	Project pulumi.StringInput `pulumi:"project"`
	// The name of the branch, tag, or commit SHA.
	Ref pulumi.StringInput `pulumi:"ref"`
}

func (GetArtifactFileOutputArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*GetArtifactFileArgs)(nil)).Elem()
}

// A collection of values returned by getArtifactFile.
type GetArtifactFileResultOutput struct{ *pulumi.OutputState }

func (GetArtifactFileResultOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*GetArtifactFileResult)(nil)).Elem()
}

func (o GetArtifactFileResultOutput) ToGetArtifactFileResultOutput() GetArtifactFileResultOutput {
	return o
}

func (o GetArtifactFileResultOutput) ToGetArtifactFileResultOutputWithContext(ctx context.Context) GetArtifactFileResultOutput {
	return o
}

// Path to the artifact file within the job's artifacts archive. This path is relative to the archive contents (not the local filesystem). Ensure each `getArtifactFile` data source in your configuration uses a unique artifactPath to avoid ambiguity.
func (o GetArtifactFileResultOutput) ArtifactPath() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.ArtifactPath }).(pulumi.StringOutput)
}

// The content of the artifact file as a UTF-8 string. Use `contentBase64` for binary files.
func (o GetArtifactFileResultOutput) Content() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.Content }).(pulumi.StringOutput)
}

// The content of the artifact file as a base64-encoded string. Useful for binary files.
func (o GetArtifactFileResultOutput) ContentBase64() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.ContentBase64 }).(pulumi.StringOutput)
}

// The ID of this datasource. In the format `<project>:<ref>:<job>:<artifact_path>`.
func (o GetArtifactFileResultOutput) Id() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.Id }).(pulumi.StringOutput)
}

// The name of the job.
func (o GetArtifactFileResultOutput) Job() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.Job }).(pulumi.StringOutput)
}

// Maximum bytes to read from the artifact. Defaults to 10MB (10485760 bytes).
func (o GetArtifactFileResultOutput) MaxSizeBytes() pulumi.IntPtrOutput {
	return o.ApplyT(func(v GetArtifactFileResult) *int { return v.MaxSizeBytes }).(pulumi.IntPtrOutput)
}

// The ID or URL-encoded path of the project.
func (o GetArtifactFileResultOutput) Project() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.Project }).(pulumi.StringOutput)
}

// The name of the branch, tag, or commit SHA.
func (o GetArtifactFileResultOutput) Ref() pulumi.StringOutput {
	return o.ApplyT(func(v GetArtifactFileResult) string { return v.Ref }).(pulumi.StringOutput)
}

func init() {
	pulumi.RegisterOutputType(GetArtifactFileResultOutput{})
}
