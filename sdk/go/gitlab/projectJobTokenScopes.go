// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package gitlab

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi-gitlab/sdk/v9/go/gitlab/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// The `ProjectJobTokenScopes` resource allows to manage the CI/CD Job Token scopes in a project.
// Any project or group not within the defined set of `targetProjectIds` or `targetGroupIds`, respectively, will be removed,
// which allows this resource to be used as an explicit deny.
//
// > Conflicts with the use of `ProjectJobTokenScope` when used on the same project. Use one or the other to ensure the desired state.
//
// > If the `enabled` property is false, any project or group will be allowed regardless of the given allowlist attributes.
//
// **Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/project_job_token_scopes/)
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-gitlab/sdk/v9/go/gitlab"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			_, err := gitlab.NewProjectJobTokenScopes(ctx, "allowed_single_project", &gitlab.ProjectJobTokenScopesArgs{
//				Project: pulumi.String("111"),
//				TargetProjectIds: pulumi.IntArray{
//					pulumi.Int(123),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = gitlab.NewProjectJobTokenScopes(ctx, "allowed_multiple_project", &gitlab.ProjectJobTokenScopesArgs{
//				Project: pulumi.String("111"),
//				TargetProjectIds: pulumi.IntArray{
//					pulumi.Int(123),
//					pulumi.Int(456),
//					pulumi.Int(789),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = gitlab.NewProjectJobTokenScopes(ctx, "allowed_multiple_groups", &gitlab.ProjectJobTokenScopesArgs{
//				Project:          pulumi.String("111"),
//				TargetProjectIds: pulumi.IntArray{},
//				TargetGroupIds: pulumi.IntArray{
//					pulumi.Int(321),
//					pulumi.Int(654),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			// This will remove all job token scopes, even if added outside of TF.
//			_, err = gitlab.NewProjectJobTokenScopes(ctx, "explicit_deny", &gitlab.ProjectJobTokenScopesArgs{
//				Project:          pulumi.String("111"),
//				TargetProjectIds: pulumi.IntArray{},
//			})
//			if err != nil {
//				return err
//			}
//			// This shows the explicit behavior of the enabled flag with a list of projects and groups.
//			_, err = gitlab.NewProjectJobTokenScopes(ctx, "allow_projects_and_groups", &gitlab.ProjectJobTokenScopesArgs{
//				Project: pulumi.String("111"),
//				Enabled: pulumi.Bool(true),
//				TargetProjectIds: pulumi.IntArray{
//					pulumi.Int(123),
//					pulumi.Int(456),
//					pulumi.Int(789),
//				},
//				TargetGroupIds: pulumi.IntArray{
//					pulumi.Int(321),
//					pulumi.Int(654),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			// This allows all projects and groups (disabling the CI Job Token scope protection)
//			_, err = gitlab.NewProjectJobTokenScopes(ctx, "allow_all", &gitlab.ProjectJobTokenScopesArgs{
//				Project: pulumi.String("111"),
//				Enabled: pulumi.Bool(false),
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// Starting in Terraform v1.5.0, you can use an import block to import `gitlab_project_job_token_scopes`. For example:
//
// terraform
//
// import {
//
//	to = gitlab_project_job_token_scopes.example
//
//	id = "see CLI command below for ID"
//
// }
//
// Importing using the CLI is supported with the following syntax:
//
// GitLab project job token scopes can be imported using an id made up of just the `project_id`
//
// ```sh
// $ pulumi import gitlab:index/projectJobTokenScopes:ProjectJobTokenScopes bar 123
// ```
type ProjectJobTokenScopes struct {
	pulumi.CustomResourceState

	// Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `targetProjectIds` or `targetGroupIds`. Deleting the associated `ProjectJobTokenScopes` resource will reset `Enabled` on the group to `true`.
	Enabled pulumi.BoolOutput `pulumi:"enabled"`
	// The ID or full path of the project.
	Project pulumi.StringOutput `pulumi:"project"`
	// The ID of the project. Use `project` instead. To be removed in 19.0.
	//
	// Deprecated: Use `project` instead. To be removed in 19.0.
	ProjectId pulumi.IntOutput `pulumi:"projectId"`
	// A set of group IDs that are in the CI/CD job token inbound allowlist.
	TargetGroupIds pulumi.IntArrayOutput `pulumi:"targetGroupIds"`
	// A set of project IDs that are in the CI/CD job token inbound allowlist.
	TargetProjectIds pulumi.IntArrayOutput `pulumi:"targetProjectIds"`
}

// NewProjectJobTokenScopes registers a new resource with the given unique name, arguments, and options.
func NewProjectJobTokenScopes(ctx *pulumi.Context,
	name string, args *ProjectJobTokenScopesArgs, opts ...pulumi.ResourceOption) (*ProjectJobTokenScopes, error) {
	if args == nil {
		args = &ProjectJobTokenScopesArgs{}
	}

	opts = internal.PkgResourceDefaultOpts(opts)
	var resource ProjectJobTokenScopes
	err := ctx.RegisterResource("gitlab:index/projectJobTokenScopes:ProjectJobTokenScopes", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetProjectJobTokenScopes gets an existing ProjectJobTokenScopes resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetProjectJobTokenScopes(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ProjectJobTokenScopesState, opts ...pulumi.ResourceOption) (*ProjectJobTokenScopes, error) {
	var resource ProjectJobTokenScopes
	err := ctx.ReadResource("gitlab:index/projectJobTokenScopes:ProjectJobTokenScopes", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ProjectJobTokenScopes resources.
type projectJobTokenScopesState struct {
	// Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `targetProjectIds` or `targetGroupIds`. Deleting the associated `ProjectJobTokenScopes` resource will reset `Enabled` on the group to `true`.
	Enabled *bool `pulumi:"enabled"`
	// The ID or full path of the project.
	Project *string `pulumi:"project"`
	// The ID of the project. Use `project` instead. To be removed in 19.0.
	//
	// Deprecated: Use `project` instead. To be removed in 19.0.
	ProjectId *int `pulumi:"projectId"`
	// A set of group IDs that are in the CI/CD job token inbound allowlist.
	TargetGroupIds []int `pulumi:"targetGroupIds"`
	// A set of project IDs that are in the CI/CD job token inbound allowlist.
	TargetProjectIds []int `pulumi:"targetProjectIds"`
}

type ProjectJobTokenScopesState struct {
	// Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `targetProjectIds` or `targetGroupIds`. Deleting the associated `ProjectJobTokenScopes` resource will reset `Enabled` on the group to `true`.
	Enabled pulumi.BoolPtrInput
	// The ID or full path of the project.
	Project pulumi.StringPtrInput
	// The ID of the project. Use `project` instead. To be removed in 19.0.
	//
	// Deprecated: Use `project` instead. To be removed in 19.0.
	ProjectId pulumi.IntPtrInput
	// A set of group IDs that are in the CI/CD job token inbound allowlist.
	TargetGroupIds pulumi.IntArrayInput
	// A set of project IDs that are in the CI/CD job token inbound allowlist.
	TargetProjectIds pulumi.IntArrayInput
}

func (ProjectJobTokenScopesState) ElementType() reflect.Type {
	return reflect.TypeOf((*projectJobTokenScopesState)(nil)).Elem()
}

type projectJobTokenScopesArgs struct {
	// Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `targetProjectIds` or `targetGroupIds`. Deleting the associated `ProjectJobTokenScopes` resource will reset `Enabled` on the group to `true`.
	Enabled *bool `pulumi:"enabled"`
	// The ID or full path of the project.
	Project *string `pulumi:"project"`
	// The ID of the project. Use `project` instead. To be removed in 19.0.
	//
	// Deprecated: Use `project` instead. To be removed in 19.0.
	ProjectId *int `pulumi:"projectId"`
	// A set of group IDs that are in the CI/CD job token inbound allowlist.
	TargetGroupIds []int `pulumi:"targetGroupIds"`
	// A set of project IDs that are in the CI/CD job token inbound allowlist.
	TargetProjectIds []int `pulumi:"targetProjectIds"`
}

// The set of arguments for constructing a ProjectJobTokenScopes resource.
type ProjectJobTokenScopesArgs struct {
	// Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `targetProjectIds` or `targetGroupIds`. Deleting the associated `ProjectJobTokenScopes` resource will reset `Enabled` on the group to `true`.
	Enabled pulumi.BoolPtrInput
	// The ID or full path of the project.
	Project pulumi.StringPtrInput
	// The ID of the project. Use `project` instead. To be removed in 19.0.
	//
	// Deprecated: Use `project` instead. To be removed in 19.0.
	ProjectId pulumi.IntPtrInput
	// A set of group IDs that are in the CI/CD job token inbound allowlist.
	TargetGroupIds pulumi.IntArrayInput
	// A set of project IDs that are in the CI/CD job token inbound allowlist.
	TargetProjectIds pulumi.IntArrayInput
}

func (ProjectJobTokenScopesArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*projectJobTokenScopesArgs)(nil)).Elem()
}

type ProjectJobTokenScopesInput interface {
	pulumi.Input

	ToProjectJobTokenScopesOutput() ProjectJobTokenScopesOutput
	ToProjectJobTokenScopesOutputWithContext(ctx context.Context) ProjectJobTokenScopesOutput
}

func (*ProjectJobTokenScopes) ElementType() reflect.Type {
	return reflect.TypeOf((**ProjectJobTokenScopes)(nil)).Elem()
}

func (i *ProjectJobTokenScopes) ToProjectJobTokenScopesOutput() ProjectJobTokenScopesOutput {
	return i.ToProjectJobTokenScopesOutputWithContext(context.Background())
}

func (i *ProjectJobTokenScopes) ToProjectJobTokenScopesOutputWithContext(ctx context.Context) ProjectJobTokenScopesOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ProjectJobTokenScopesOutput)
}

// ProjectJobTokenScopesArrayInput is an input type that accepts ProjectJobTokenScopesArray and ProjectJobTokenScopesArrayOutput values.
// You can construct a concrete instance of `ProjectJobTokenScopesArrayInput` via:
//
//	ProjectJobTokenScopesArray{ ProjectJobTokenScopesArgs{...} }
type ProjectJobTokenScopesArrayInput interface {
	pulumi.Input

	ToProjectJobTokenScopesArrayOutput() ProjectJobTokenScopesArrayOutput
	ToProjectJobTokenScopesArrayOutputWithContext(context.Context) ProjectJobTokenScopesArrayOutput
}

type ProjectJobTokenScopesArray []ProjectJobTokenScopesInput

func (ProjectJobTokenScopesArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ProjectJobTokenScopes)(nil)).Elem()
}

func (i ProjectJobTokenScopesArray) ToProjectJobTokenScopesArrayOutput() ProjectJobTokenScopesArrayOutput {
	return i.ToProjectJobTokenScopesArrayOutputWithContext(context.Background())
}

func (i ProjectJobTokenScopesArray) ToProjectJobTokenScopesArrayOutputWithContext(ctx context.Context) ProjectJobTokenScopesArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ProjectJobTokenScopesArrayOutput)
}

// ProjectJobTokenScopesMapInput is an input type that accepts ProjectJobTokenScopesMap and ProjectJobTokenScopesMapOutput values.
// You can construct a concrete instance of `ProjectJobTokenScopesMapInput` via:
//
//	ProjectJobTokenScopesMap{ "key": ProjectJobTokenScopesArgs{...} }
type ProjectJobTokenScopesMapInput interface {
	pulumi.Input

	ToProjectJobTokenScopesMapOutput() ProjectJobTokenScopesMapOutput
	ToProjectJobTokenScopesMapOutputWithContext(context.Context) ProjectJobTokenScopesMapOutput
}

type ProjectJobTokenScopesMap map[string]ProjectJobTokenScopesInput

func (ProjectJobTokenScopesMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ProjectJobTokenScopes)(nil)).Elem()
}

func (i ProjectJobTokenScopesMap) ToProjectJobTokenScopesMapOutput() ProjectJobTokenScopesMapOutput {
	return i.ToProjectJobTokenScopesMapOutputWithContext(context.Background())
}

func (i ProjectJobTokenScopesMap) ToProjectJobTokenScopesMapOutputWithContext(ctx context.Context) ProjectJobTokenScopesMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(ProjectJobTokenScopesMapOutput)
}

type ProjectJobTokenScopesOutput struct{ *pulumi.OutputState }

func (ProjectJobTokenScopesOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**ProjectJobTokenScopes)(nil)).Elem()
}

func (o ProjectJobTokenScopesOutput) ToProjectJobTokenScopesOutput() ProjectJobTokenScopesOutput {
	return o
}

func (o ProjectJobTokenScopesOutput) ToProjectJobTokenScopesOutputWithContext(ctx context.Context) ProjectJobTokenScopesOutput {
	return o
}

// Enable the given inbound allowlist. If false, will allow any project or group regardless of the values in `targetProjectIds` or `targetGroupIds`. Deleting the associated `ProjectJobTokenScopes` resource will reset `Enabled` on the group to `true`.
func (o ProjectJobTokenScopesOutput) Enabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *ProjectJobTokenScopes) pulumi.BoolOutput { return v.Enabled }).(pulumi.BoolOutput)
}

// The ID or full path of the project.
func (o ProjectJobTokenScopesOutput) Project() pulumi.StringOutput {
	return o.ApplyT(func(v *ProjectJobTokenScopes) pulumi.StringOutput { return v.Project }).(pulumi.StringOutput)
}

// The ID of the project. Use `project` instead. To be removed in 19.0.
//
// Deprecated: Use `project` instead. To be removed in 19.0.
func (o ProjectJobTokenScopesOutput) ProjectId() pulumi.IntOutput {
	return o.ApplyT(func(v *ProjectJobTokenScopes) pulumi.IntOutput { return v.ProjectId }).(pulumi.IntOutput)
}

// A set of group IDs that are in the CI/CD job token inbound allowlist.
func (o ProjectJobTokenScopesOutput) TargetGroupIds() pulumi.IntArrayOutput {
	return o.ApplyT(func(v *ProjectJobTokenScopes) pulumi.IntArrayOutput { return v.TargetGroupIds }).(pulumi.IntArrayOutput)
}

// A set of project IDs that are in the CI/CD job token inbound allowlist.
func (o ProjectJobTokenScopesOutput) TargetProjectIds() pulumi.IntArrayOutput {
	return o.ApplyT(func(v *ProjectJobTokenScopes) pulumi.IntArrayOutput { return v.TargetProjectIds }).(pulumi.IntArrayOutput)
}

type ProjectJobTokenScopesArrayOutput struct{ *pulumi.OutputState }

func (ProjectJobTokenScopesArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*ProjectJobTokenScopes)(nil)).Elem()
}

func (o ProjectJobTokenScopesArrayOutput) ToProjectJobTokenScopesArrayOutput() ProjectJobTokenScopesArrayOutput {
	return o
}

func (o ProjectJobTokenScopesArrayOutput) ToProjectJobTokenScopesArrayOutputWithContext(ctx context.Context) ProjectJobTokenScopesArrayOutput {
	return o
}

func (o ProjectJobTokenScopesArrayOutput) Index(i pulumi.IntInput) ProjectJobTokenScopesOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *ProjectJobTokenScopes {
		return vs[0].([]*ProjectJobTokenScopes)[vs[1].(int)]
	}).(ProjectJobTokenScopesOutput)
}

type ProjectJobTokenScopesMapOutput struct{ *pulumi.OutputState }

func (ProjectJobTokenScopesMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*ProjectJobTokenScopes)(nil)).Elem()
}

func (o ProjectJobTokenScopesMapOutput) ToProjectJobTokenScopesMapOutput() ProjectJobTokenScopesMapOutput {
	return o
}

func (o ProjectJobTokenScopesMapOutput) ToProjectJobTokenScopesMapOutputWithContext(ctx context.Context) ProjectJobTokenScopesMapOutput {
	return o
}

func (o ProjectJobTokenScopesMapOutput) MapIndex(k pulumi.StringInput) ProjectJobTokenScopesOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *ProjectJobTokenScopes {
		return vs[0].(map[string]*ProjectJobTokenScopes)[vs[1].(string)]
	}).(ProjectJobTokenScopesOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*ProjectJobTokenScopesInput)(nil)).Elem(), &ProjectJobTokenScopes{})
	pulumi.RegisterInputType(reflect.TypeOf((*ProjectJobTokenScopesArrayInput)(nil)).Elem(), ProjectJobTokenScopesArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*ProjectJobTokenScopesMapInput)(nil)).Elem(), ProjectJobTokenScopesMap{})
	pulumi.RegisterOutputType(ProjectJobTokenScopesOutput{})
	pulumi.RegisterOutputType(ProjectJobTokenScopesArrayOutput{})
	pulumi.RegisterOutputType(ProjectJobTokenScopesMapOutput{})
}
