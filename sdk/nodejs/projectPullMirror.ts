// *** WARNING: this file was generated by pulumi-language-nodejs. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as utilities from "./utilities";

/**
 * The `gitlab.ProjectPullMirror` resource allows managing pull mirroring for GitLab projects.
 *
 * This resource uses the dedicated pull mirror API endpoint which provides reliable configuration of pull mirroring after project creation.
 *
 * **Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/project_pull_mirroring/#configure-pull-mirroring-for-a-project)
 *
 * ## Example Usage
 *
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as gitlab from "@pulumi/gitlab";
 *
 * // Basic pull mirror from GitHub
 * // Note: Unspecified options will use GitLab's defaults
 * const github = new gitlab.ProjectPullMirror("github", {
 *     project: example.id,
 *     url: "https://github.com/example/repo.git",
 *     authUser: "github-username",
 *     authPassword: githubToken,
 * });
 * // Pull mirror with explicit options
 * // Only specify options you want to control; omit others to use GitLab defaults
 * const advanced = new gitlab.ProjectPullMirror("advanced", {
 *     project: example.id,
 *     url: "https://github.com/example/repo.git",
 *     enabled: true,
 *     authUser: "github-username",
 *     authPassword: githubToken,
 *     mirrorTriggerBuilds: true,
 *     onlyMirrorProtectedBranches: true,
 *     mirrorOverwritesDivergedBranches: false,
 * });
 * // Pull mirror with branch regex (Premium/Ultimate)
 * const regex = new gitlab.ProjectPullMirror("regex", {
 *     project: example.id,
 *     url: "https://github.com/example/repo.git",
 *     authUser: "github-username",
 *     authPassword: githubToken,
 *     mirrorBranchRegex: "^(main|develop|release/.*)$",
 * });
 * ```
 *
 * ## Import
 *
 * Starting in Terraform v1.5.0, you can use an import block to import `gitlab_project_pull_mirror`. For example:
 *
 * terraform
 *
 * import {
 *
 *   to = gitlab_project_pull_mirror.example
 *
 *   id = "see CLI command below for ID"
 *
 * }
 *
 * Importing using the CLI is supported with the following syntax:
 *
 * Import using project ID
 *
 * ```sh
 * $ pulumi import gitlab:index/projectPullMirror:ProjectPullMirror example 123
 * ```
 *
 * Import using project path
 *
 * Note: Import is not supported for disabled mirrors because the GitLab API returns
 *
 * http 400 for disabled mirrors.
 *
 * ```sh
 * $ pulumi import gitlab:index/projectPullMirror:ProjectPullMirror example "group/project"
 * ```
 */
export class ProjectPullMirror extends pulumi.CustomResource {
    /**
     * Get an existing ProjectPullMirror resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: ProjectPullMirrorState, opts?: pulumi.CustomResourceOptions): ProjectPullMirror {
        return new ProjectPullMirror(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'gitlab:index/projectPullMirror:ProjectPullMirror';

    /**
     * Returns true if the given object is an instance of ProjectPullMirror.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is ProjectPullMirror {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === ProjectPullMirror.__pulumiType;
    }

    /**
     * Authentication password or token for the remote repository.
     */
    declare public readonly authPassword: pulumi.Output<string | undefined>;
    /**
     * Authentication username for the remote repository.
     */
    declare public readonly authUser: pulumi.Output<string | undefined>;
    /**
     * Enable or disable the pull mirror. Defaults to `true`.
     */
    declare public readonly enabled: pulumi.Output<boolean>;
    /**
     * Last error message from the mirror operation.
     */
    declare public /*out*/ readonly lastError: pulumi.Output<string>;
    /**
     * Timestamp of the last successful mirror update.
     */
    declare public /*out*/ readonly lastSuccessfulUpdateAt: pulumi.Output<string>;
    /**
     * Timestamp of the last mirror update attempt.
     */
    declare public /*out*/ readonly lastUpdateAt: pulumi.Output<string>;
    /**
     * Timestamp when the last mirror update started.
     */
    declare public /*out*/ readonly lastUpdateStartedAt: pulumi.Output<string>;
    /**
     * Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `onlyMirrorProtectedBranches`.
     */
    declare public readonly mirrorBranchRegex: pulumi.Output<string>;
    /**
     * The ID of the pull mirror. This ID is set by GitLab.
     */
    declare public /*out*/ readonly mirrorId: pulumi.Output<number>;
    /**
     * Overwrite diverged branches on the target project.
     */
    declare public readonly mirrorOverwritesDivergedBranches: pulumi.Output<boolean>;
    /**
     * Trigger CI/CD pipelines when the mirror updates.
     */
    declare public readonly mirrorTriggerBuilds: pulumi.Output<boolean>;
    /**
     * Mirror only protected branches. Cannot be used with `mirrorBranchRegex`.
     */
    declare public readonly onlyMirrorProtectedBranches: pulumi.Output<boolean>;
    /**
     * The ID or URL-encoded path of the project owned by the authenticated user.
     */
    declare public readonly project: pulumi.Output<string>;
    /**
     * Current status of the mirror update.
     */
    declare public /*out*/ readonly updateStatus: pulumi.Output<string>;
    /**
     * The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `authUser` and `authPassword` instead.
     */
    declare public readonly url: pulumi.Output<string>;

    /**
     * Create a ProjectPullMirror resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args: ProjectPullMirrorArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: ProjectPullMirrorArgs | ProjectPullMirrorState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as ProjectPullMirrorState | undefined;
            resourceInputs["authPassword"] = state?.authPassword;
            resourceInputs["authUser"] = state?.authUser;
            resourceInputs["enabled"] = state?.enabled;
            resourceInputs["lastError"] = state?.lastError;
            resourceInputs["lastSuccessfulUpdateAt"] = state?.lastSuccessfulUpdateAt;
            resourceInputs["lastUpdateAt"] = state?.lastUpdateAt;
            resourceInputs["lastUpdateStartedAt"] = state?.lastUpdateStartedAt;
            resourceInputs["mirrorBranchRegex"] = state?.mirrorBranchRegex;
            resourceInputs["mirrorId"] = state?.mirrorId;
            resourceInputs["mirrorOverwritesDivergedBranches"] = state?.mirrorOverwritesDivergedBranches;
            resourceInputs["mirrorTriggerBuilds"] = state?.mirrorTriggerBuilds;
            resourceInputs["onlyMirrorProtectedBranches"] = state?.onlyMirrorProtectedBranches;
            resourceInputs["project"] = state?.project;
            resourceInputs["updateStatus"] = state?.updateStatus;
            resourceInputs["url"] = state?.url;
        } else {
            const args = argsOrState as ProjectPullMirrorArgs | undefined;
            if (args?.project === undefined && !opts.urn) {
                throw new Error("Missing required property 'project'");
            }
            if (args?.url === undefined && !opts.urn) {
                throw new Error("Missing required property 'url'");
            }
            resourceInputs["authPassword"] = args?.authPassword ? pulumi.secret(args.authPassword) : undefined;
            resourceInputs["authUser"] = args?.authUser;
            resourceInputs["enabled"] = args?.enabled;
            resourceInputs["mirrorBranchRegex"] = args?.mirrorBranchRegex;
            resourceInputs["mirrorOverwritesDivergedBranches"] = args?.mirrorOverwritesDivergedBranches;
            resourceInputs["mirrorTriggerBuilds"] = args?.mirrorTriggerBuilds;
            resourceInputs["onlyMirrorProtectedBranches"] = args?.onlyMirrorProtectedBranches;
            resourceInputs["project"] = args?.project;
            resourceInputs["url"] = args?.url ? pulumi.secret(args.url) : undefined;
            resourceInputs["lastError"] = undefined /*out*/;
            resourceInputs["lastSuccessfulUpdateAt"] = undefined /*out*/;
            resourceInputs["lastUpdateAt"] = undefined /*out*/;
            resourceInputs["lastUpdateStartedAt"] = undefined /*out*/;
            resourceInputs["mirrorId"] = undefined /*out*/;
            resourceInputs["updateStatus"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        const secretOpts = { additionalSecretOutputs: ["authPassword", "url"] };
        opts = pulumi.mergeOptions(opts, secretOpts);
        super(ProjectPullMirror.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering ProjectPullMirror resources.
 */
export interface ProjectPullMirrorState {
    /**
     * Authentication password or token for the remote repository.
     */
    authPassword?: pulumi.Input<string>;
    /**
     * Authentication username for the remote repository.
     */
    authUser?: pulumi.Input<string>;
    /**
     * Enable or disable the pull mirror. Defaults to `true`.
     */
    enabled?: pulumi.Input<boolean>;
    /**
     * Last error message from the mirror operation.
     */
    lastError?: pulumi.Input<string>;
    /**
     * Timestamp of the last successful mirror update.
     */
    lastSuccessfulUpdateAt?: pulumi.Input<string>;
    /**
     * Timestamp of the last mirror update attempt.
     */
    lastUpdateAt?: pulumi.Input<string>;
    /**
     * Timestamp when the last mirror update started.
     */
    lastUpdateStartedAt?: pulumi.Input<string>;
    /**
     * Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `onlyMirrorProtectedBranches`.
     */
    mirrorBranchRegex?: pulumi.Input<string>;
    /**
     * The ID of the pull mirror. This ID is set by GitLab.
     */
    mirrorId?: pulumi.Input<number>;
    /**
     * Overwrite diverged branches on the target project.
     */
    mirrorOverwritesDivergedBranches?: pulumi.Input<boolean>;
    /**
     * Trigger CI/CD pipelines when the mirror updates.
     */
    mirrorTriggerBuilds?: pulumi.Input<boolean>;
    /**
     * Mirror only protected branches. Cannot be used with `mirrorBranchRegex`.
     */
    onlyMirrorProtectedBranches?: pulumi.Input<boolean>;
    /**
     * The ID or URL-encoded path of the project owned by the authenticated user.
     */
    project?: pulumi.Input<string>;
    /**
     * Current status of the mirror update.
     */
    updateStatus?: pulumi.Input<string>;
    /**
     * The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `authUser` and `authPassword` instead.
     */
    url?: pulumi.Input<string>;
}

/**
 * The set of arguments for constructing a ProjectPullMirror resource.
 */
export interface ProjectPullMirrorArgs {
    /**
     * Authentication password or token for the remote repository.
     */
    authPassword?: pulumi.Input<string>;
    /**
     * Authentication username for the remote repository.
     */
    authUser?: pulumi.Input<string>;
    /**
     * Enable or disable the pull mirror. Defaults to `true`.
     */
    enabled?: pulumi.Input<boolean>;
    /**
     * Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `onlyMirrorProtectedBranches`.
     */
    mirrorBranchRegex?: pulumi.Input<string>;
    /**
     * Overwrite diverged branches on the target project.
     */
    mirrorOverwritesDivergedBranches?: pulumi.Input<boolean>;
    /**
     * Trigger CI/CD pipelines when the mirror updates.
     */
    mirrorTriggerBuilds?: pulumi.Input<boolean>;
    /**
     * Mirror only protected branches. Cannot be used with `mirrorBranchRegex`.
     */
    onlyMirrorProtectedBranches?: pulumi.Input<boolean>;
    /**
     * The ID or URL-encoded path of the project owned by the authenticated user.
     */
    project: pulumi.Input<string>;
    /**
     * The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `authUser` and `authPassword` instead.
     */
    url: pulumi.Input<string>;
}
