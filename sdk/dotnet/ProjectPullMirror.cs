// *** WARNING: this file was generated by pulumi-language-dotnet. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

using System;
using System.Collections.Generic;
using System.Collections.Immutable;
using System.Threading.Tasks;
using Pulumi.Serialization;

namespace Pulumi.GitLab
{
    /// <summary>
    /// The `gitlab.ProjectPullMirror` resource allows managing pull mirroring for GitLab projects.
    /// 
    /// This resource uses the dedicated pull mirror API endpoint which provides reliable configuration of pull mirroring after project creation.
    /// 
    /// **Upstream API**: [GitLab REST API docs](https://docs.gitlab.com/api/project_pull_mirroring/#configure-pull-mirroring-for-a-project)
    /// 
    /// ## Example Usage
    /// 
    /// ```csharp
    /// using System.Collections.Generic;
    /// using System.Linq;
    /// using Pulumi;
    /// using GitLab = Pulumi.GitLab;
    /// 
    /// return await Deployment.RunAsync(() =&gt; 
    /// {
    ///     // Basic pull mirror from GitHub
    ///     // Note: Unspecified options will use GitLab's defaults
    ///     var github = new GitLab.ProjectPullMirror("github", new()
    ///     {
    ///         Project = example.Id,
    ///         Url = "https://github.com/example/repo.git",
    ///         AuthUser = "github-username",
    ///         AuthPassword = githubToken,
    ///     });
    /// 
    ///     // Pull mirror with explicit options
    ///     // Only specify options you want to control; omit others to use GitLab defaults
    ///     var advanced = new GitLab.ProjectPullMirror("advanced", new()
    ///     {
    ///         Project = example.Id,
    ///         Url = "https://github.com/example/repo.git",
    ///         Enabled = true,
    ///         AuthUser = "github-username",
    ///         AuthPassword = githubToken,
    ///         MirrorTriggerBuilds = true,
    ///         OnlyMirrorProtectedBranches = true,
    ///         MirrorOverwritesDivergedBranches = false,
    ///     });
    /// 
    ///     // Pull mirror with branch regex (Premium/Ultimate)
    ///     var regex = new GitLab.ProjectPullMirror("regex", new()
    ///     {
    ///         Project = example.Id,
    ///         Url = "https://github.com/example/repo.git",
    ///         AuthUser = "github-username",
    ///         AuthPassword = githubToken,
    ///         MirrorBranchRegex = "^(main|develop|release/.*)$",
    ///     });
    /// 
    /// });
    /// ```
    /// 
    /// ## Import
    /// 
    /// Starting in Terraform v1.5.0, you can use an import block to import `gitlab_project_pull_mirror`. For example:
    /// 
    /// terraform
    /// 
    /// import {
    /// 
    ///   to = gitlab_project_pull_mirror.example
    /// 
    ///   id = "see CLI command below for ID"
    /// 
    /// }
    /// 
    /// Importing using the CLI is supported with the following syntax:
    /// 
    /// Import using project ID
    /// 
    /// ```sh
    /// $ pulumi import gitlab:index/projectPullMirror:ProjectPullMirror example 123
    /// ```
    /// 
    /// Import using project path
    /// 
    /// Note: Import is not supported for disabled mirrors because the GitLab API returns
    /// 
    /// http 400 for disabled mirrors.
    /// 
    /// ```sh
    /// $ pulumi import gitlab:index/projectPullMirror:ProjectPullMirror example "group/project"
    /// ```
    /// </summary>
    [GitLabResourceType("gitlab:index/projectPullMirror:ProjectPullMirror")]
    public partial class ProjectPullMirror : global::Pulumi.CustomResource
    {
        /// <summary>
        /// Authentication password or token for the remote repository.
        /// </summary>
        [Output("authPassword")]
        public Output<string?> AuthPassword { get; private set; } = null!;

        /// <summary>
        /// Authentication username for the remote repository.
        /// </summary>
        [Output("authUser")]
        public Output<string?> AuthUser { get; private set; } = null!;

        /// <summary>
        /// Enable or disable the pull mirror. Defaults to `True`.
        /// </summary>
        [Output("enabled")]
        public Output<bool> Enabled { get; private set; } = null!;

        /// <summary>
        /// Last error message from the mirror operation.
        /// </summary>
        [Output("lastError")]
        public Output<string> LastError { get; private set; } = null!;

        /// <summary>
        /// Timestamp of the last successful mirror update.
        /// </summary>
        [Output("lastSuccessfulUpdateAt")]
        public Output<string> LastSuccessfulUpdateAt { get; private set; } = null!;

        /// <summary>
        /// Timestamp of the last mirror update attempt.
        /// </summary>
        [Output("lastUpdateAt")]
        public Output<string> LastUpdateAt { get; private set; } = null!;

        /// <summary>
        /// Timestamp when the last mirror update started.
        /// </summary>
        [Output("lastUpdateStartedAt")]
        public Output<string> LastUpdateStartedAt { get; private set; } = null!;

        /// <summary>
        /// Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `OnlyMirrorProtectedBranches`.
        /// </summary>
        [Output("mirrorBranchRegex")]
        public Output<string> MirrorBranchRegex { get; private set; } = null!;

        /// <summary>
        /// The ID of the pull mirror. This ID is set by GitLab.
        /// </summary>
        [Output("mirrorId")]
        public Output<int> MirrorId { get; private set; } = null!;

        /// <summary>
        /// Overwrite diverged branches on the target project.
        /// </summary>
        [Output("mirrorOverwritesDivergedBranches")]
        public Output<bool> MirrorOverwritesDivergedBranches { get; private set; } = null!;

        /// <summary>
        /// Trigger CI/CD pipelines when the mirror updates.
        /// </summary>
        [Output("mirrorTriggerBuilds")]
        public Output<bool> MirrorTriggerBuilds { get; private set; } = null!;

        /// <summary>
        /// Mirror only protected branches. Cannot be used with `MirrorBranchRegex`.
        /// </summary>
        [Output("onlyMirrorProtectedBranches")]
        public Output<bool> OnlyMirrorProtectedBranches { get; private set; } = null!;

        /// <summary>
        /// The ID or URL-encoded path of the project owned by the authenticated user.
        /// </summary>
        [Output("project")]
        public Output<string> Project { get; private set; } = null!;

        /// <summary>
        /// Current status of the mirror update.
        /// </summary>
        [Output("updateStatus")]
        public Output<string> UpdateStatus { get; private set; } = null!;

        /// <summary>
        /// The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `AuthUser` and `AuthPassword` instead.
        /// </summary>
        [Output("url")]
        public Output<string> Url { get; private set; } = null!;


        /// <summary>
        /// Create a ProjectPullMirror resource with the given unique name, arguments, and options.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resource</param>
        /// <param name="args">The arguments used to populate this resource's properties</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public ProjectPullMirror(string name, ProjectPullMirrorArgs args, CustomResourceOptions? options = null)
            : base("gitlab:index/projectPullMirror:ProjectPullMirror", name, args ?? new ProjectPullMirrorArgs(), MakeResourceOptions(options, ""))
        {
        }

        private ProjectPullMirror(string name, Input<string> id, ProjectPullMirrorState? state = null, CustomResourceOptions? options = null)
            : base("gitlab:index/projectPullMirror:ProjectPullMirror", name, state, MakeResourceOptions(options, id))
        {
        }

        private static CustomResourceOptions MakeResourceOptions(CustomResourceOptions? options, Input<string>? id)
        {
            var defaultOptions = new CustomResourceOptions
            {
                Version = Utilities.Version,
                AdditionalSecretOutputs =
                {
                    "authPassword",
                    "url",
                },
            };
            var merged = CustomResourceOptions.Merge(defaultOptions, options);
            // Override the ID if one was specified for consistency with other language SDKs.
            merged.Id = id ?? merged.Id;
            return merged;
        }
        /// <summary>
        /// Get an existing ProjectPullMirror resource's state with the given name, ID, and optional extra
        /// properties used to qualify the lookup.
        /// </summary>
        ///
        /// <param name="name">The unique name of the resulting resource.</param>
        /// <param name="id">The unique provider ID of the resource to lookup.</param>
        /// <param name="state">Any extra arguments used during the lookup.</param>
        /// <param name="options">A bag of options that control this resource's behavior</param>
        public static ProjectPullMirror Get(string name, Input<string> id, ProjectPullMirrorState? state = null, CustomResourceOptions? options = null)
        {
            return new ProjectPullMirror(name, id, state, options);
        }
    }

    public sealed class ProjectPullMirrorArgs : global::Pulumi.ResourceArgs
    {
        [Input("authPassword")]
        private Input<string>? _authPassword;

        /// <summary>
        /// Authentication password or token for the remote repository.
        /// </summary>
        public Input<string>? AuthPassword
        {
            get => _authPassword;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _authPassword = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        /// <summary>
        /// Authentication username for the remote repository.
        /// </summary>
        [Input("authUser")]
        public Input<string>? AuthUser { get; set; }

        /// <summary>
        /// Enable or disable the pull mirror. Defaults to `True`.
        /// </summary>
        [Input("enabled")]
        public Input<bool>? Enabled { get; set; }

        /// <summary>
        /// Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `OnlyMirrorProtectedBranches`.
        /// </summary>
        [Input("mirrorBranchRegex")]
        public Input<string>? MirrorBranchRegex { get; set; }

        /// <summary>
        /// Overwrite diverged branches on the target project.
        /// </summary>
        [Input("mirrorOverwritesDivergedBranches")]
        public Input<bool>? MirrorOverwritesDivergedBranches { get; set; }

        /// <summary>
        /// Trigger CI/CD pipelines when the mirror updates.
        /// </summary>
        [Input("mirrorTriggerBuilds")]
        public Input<bool>? MirrorTriggerBuilds { get; set; }

        /// <summary>
        /// Mirror only protected branches. Cannot be used with `MirrorBranchRegex`.
        /// </summary>
        [Input("onlyMirrorProtectedBranches")]
        public Input<bool>? OnlyMirrorProtectedBranches { get; set; }

        /// <summary>
        /// The ID or URL-encoded path of the project owned by the authenticated user.
        /// </summary>
        [Input("project", required: true)]
        public Input<string> Project { get; set; } = null!;

        [Input("url", required: true)]
        private Input<string>? _url;

        /// <summary>
        /// The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `AuthUser` and `AuthPassword` instead.
        /// </summary>
        public Input<string>? Url
        {
            get => _url;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _url = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        public ProjectPullMirrorArgs()
        {
        }
        public static new ProjectPullMirrorArgs Empty => new ProjectPullMirrorArgs();
    }

    public sealed class ProjectPullMirrorState : global::Pulumi.ResourceArgs
    {
        [Input("authPassword")]
        private Input<string>? _authPassword;

        /// <summary>
        /// Authentication password or token for the remote repository.
        /// </summary>
        public Input<string>? AuthPassword
        {
            get => _authPassword;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _authPassword = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        /// <summary>
        /// Authentication username for the remote repository.
        /// </summary>
        [Input("authUser")]
        public Input<string>? AuthUser { get; set; }

        /// <summary>
        /// Enable or disable the pull mirror. Defaults to `True`.
        /// </summary>
        [Input("enabled")]
        public Input<bool>? Enabled { get; set; }

        /// <summary>
        /// Last error message from the mirror operation.
        /// </summary>
        [Input("lastError")]
        public Input<string>? LastError { get; set; }

        /// <summary>
        /// Timestamp of the last successful mirror update.
        /// </summary>
        [Input("lastSuccessfulUpdateAt")]
        public Input<string>? LastSuccessfulUpdateAt { get; set; }

        /// <summary>
        /// Timestamp of the last mirror update attempt.
        /// </summary>
        [Input("lastUpdateAt")]
        public Input<string>? LastUpdateAt { get; set; }

        /// <summary>
        /// Timestamp when the last mirror update started.
        /// </summary>
        [Input("lastUpdateStartedAt")]
        public Input<string>? LastUpdateStartedAt { get; set; }

        /// <summary>
        /// Regular expression for branches to mirror. Requires GitLab Premium or Ultimate. Cannot be used with `OnlyMirrorProtectedBranches`.
        /// </summary>
        [Input("mirrorBranchRegex")]
        public Input<string>? MirrorBranchRegex { get; set; }

        /// <summary>
        /// The ID of the pull mirror. This ID is set by GitLab.
        /// </summary>
        [Input("mirrorId")]
        public Input<int>? MirrorId { get; set; }

        /// <summary>
        /// Overwrite diverged branches on the target project.
        /// </summary>
        [Input("mirrorOverwritesDivergedBranches")]
        public Input<bool>? MirrorOverwritesDivergedBranches { get; set; }

        /// <summary>
        /// Trigger CI/CD pipelines when the mirror updates.
        /// </summary>
        [Input("mirrorTriggerBuilds")]
        public Input<bool>? MirrorTriggerBuilds { get; set; }

        /// <summary>
        /// Mirror only protected branches. Cannot be used with `MirrorBranchRegex`.
        /// </summary>
        [Input("onlyMirrorProtectedBranches")]
        public Input<bool>? OnlyMirrorProtectedBranches { get; set; }

        /// <summary>
        /// The ID or URL-encoded path of the project owned by the authenticated user.
        /// </summary>
        [Input("project")]
        public Input<string>? Project { get; set; }

        /// <summary>
        /// Current status of the mirror update.
        /// </summary>
        [Input("updateStatus")]
        public Input<string>? UpdateStatus { get; set; }

        [Input("url")]
        private Input<string>? _url;

        /// <summary>
        /// The URL of the remote repository to mirror from. While the API call allows including username and password as basic authentication in the URL, this resourcedoes not for security and idempotency reasons. Use `AuthUser` and `AuthPassword` instead.
        /// </summary>
        public Input<string>? Url
        {
            get => _url;
            set
            {
                var emptySecret = Output.CreateSecret(0);
                _url = Output.Tuple<Input<string>?, int>(value, emptySecret).Apply(t => t.Item1);
            }
        }

        public ProjectPullMirrorState()
        {
        }
        public static new ProjectPullMirrorState Empty => new ProjectPullMirrorState();
    }
}
